/**
 * Unified Components Design System
 * Harmonized styling for Grid (datagrid) and DocPool components
 * Extends docpool-variables.css with shared component styles
 */

/* ============================================
   EXTENDED CSS VARIABLES
   ============================================ */

:root {
  /* Grid/Datatable specific variables */
  --grid-wrapper-bg: var(--docpool-bg-main);
  --grid-table-bg: var(--docpool-bg-main);
  --grid-header-bg: #f4f4f4;
  --grid-footer-bg: #f4f4f4;
  --grid-row-even: #e0e0f0;
  --grid-row-hover: #f9f9f9;
  --grid-row-selected: var(--docpool-bg-selected);
  --grid-border: var(--docpool-border);
  --grid-border-hover: var(--docpool-border-hover);
  
  /* Search input styling */
  --grid-search-bg: var(--docpool-bg-main);
  --grid-search-border: var(--docpool-border);
  --grid-search-focus: var(--docpool-border-focus);
  
  /* Highlight colors */
  --grid-highlight-bg: #FF0;
  --grid-highlight-text: var(--docpool-text-primary);
  
  /* Dropdown styling */
  --dropdown-bg: var(--docpool-bg-main);
  --dropdown-shadow: var(--docpool-shadow-md);
  --dropdown-hover-bg: #f1f1f1;
  --dropdown-min-width: 150px;
  
  /* Pagination */
  --pagination-button-size: 24px;
  --pagination-gap: 3px;
  
  /* Common input styling */
  --input-padding: var(--docpool-spacing-sm);
  --input-border-radius: var(--docpool-radius-sm);
  --input-font-size: var(--docpool-font-size-base);
}

/* ============================================
   SHARED TABLE STYLES
   ============================================ */

/* Base table wrapper - used by both grid and docpool */
.datatable-wrapper,
#fileListContainer {
  margin-bottom: 5px;
  overflow-x: auto;
  overflow-y: auto;
  position: relative;
  width: 100%;
  font-family: var(--docpool-font-family);
}

/* Base table styling - harmonized between grid and docpool */
.datatable,
#fileListContainer table {
  border-collapse: collapse;
  width: 100%;
  font-family: var(--docpool-font-family);
  font-size: var(--docpool-font-size-base);
  border: 1px solid var(--grid-border);
  margin: 0;
  padding: 0;
  background-color: var(--grid-table-bg);
}

/* Table header - sticky positioning for both */
.datatable thead,
#fileListContainer table thead {
  position: sticky;
  top: 0;
  z-index: var(--docpool-z-sticky);
  background-color: var(--grid-header-bg);
  text-align: left;
  border-bottom: 2px solid var(--grid-border);
}

.datatable thead tr,
.datatable thead th,
#fileListContainer table thead tr,
#fileListContainer table thead th {
  background-color: var(--grid-header-bg);
}

/* Table header cells */
.datatable thead th,
#fileListContainer table thead th {
  padding: var(--docpool-spacing-sm);
  border: 1px solid var(--grid-border);
  font-weight: var(--docpool-font-weight-semibold);
  transition: background-color var(--docpool-transition-base);
}

.datatable thead th:hover,
#fileListContainer table thead th:hover {
  background-color: var(--docpool-bg-hover);
}

/* Table body */
.datatable tbody,
#fileListContainer table tbody {
  background-color: var(--grid-table-bg);
}

/* Table body rows - alternating colors */
.datatable tbody tr:nth-child(2n),
#fileListContainer table tbody tr:nth-child(2n) {
  background-color: var(--grid-row-even);
}

/* Table body row hover */
.datatable tbody tr:hover,
#fileListContainer table tbody tr:hover {
  outline: 2px solid var(--grid-border-hover);
  background-color: var(--grid-row-hover) !important;
  cursor: pointer;
  transition: all var(--docpool-transition-base);
}

/* Table body cells */
.datatable tbody td,
.datatable tbody th,
#fileListContainer table tbody td {
  padding: var(--docpool-spacing-xs) var(--docpool-spacing-sm);
  border: 1px solid var(--grid-border);
  transition: background-color var(--docpool-transition-base);
}

/* Table footer - sticky positioning */
.datatable tfoot {
  position: sticky;
  bottom: 0;
  z-index: var(--docpool-z-sticky);
  background-color: var(--grid-footer-bg);
  border-top: 2px solid var(--grid-border);
}

.datatable tfoot tr,
.datatable tfoot td {
  background-color: var(--grid-footer-bg);
}

/* ============================================
   FILLER ROWS
   ============================================ */

.datatable tbody tr.filler-row,
#fileListContainer table tbody tr.filler-row {
  background-color: transparent !important;
  pointer-events: none;
}

.datatable tbody tr.filler-row:nth-child(2n),
#fileListContainer table tbody tr.filler-row:nth-child(2n) {
  background-color: transparent !important;
}

.datatable tbody tr.filler-row:hover,
#fileListContainer table tbody tr.filler-row:hover {
  outline: none;
  background-color: transparent !important;
  cursor: default;
}

.datatable tbody tr.filler-row td {
  height: 100%;
}

/* ============================================
   SEARCH INPUTS
   ============================================ */

.datatable-search-wrapper input,
.datatable-search-wrapper .inputbox {
  width: 100%;
  padding: var(--input-padding);
  border: 1px solid var(--grid-search-border);
  border-radius: var(--input-border-radius);
  font-size: var(--input-font-size);
  font-family: var(--docpool-font-family);
  background-color: var(--grid-search-bg);
  transition: border-color var(--docpool-transition-base), box-shadow var(--docpool-transition-base);
  box-sizing: border-box;
}

.datatable-search-wrapper input:focus,
.datatable-search-wrapper .inputbox:focus {
  outline: 2px solid var(--grid-search-focus);
  outline-offset: -1px;
  border-color: var(--grid-search-focus);
  box-shadow: 0 0 0 3px rgba(17, 70, 145, 0.1);
}

/* Search row background */
.datatable-search-wrapper tr {
  background-color: var(--grid-header-bg);
}

/* ============================================
   SORTABLE COLUMNS
   ============================================ */

.datatable .sortable,
.datatable .sortable-td {
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

.datatable .sortable {
  text-decoration: underline;
  transition: color var(--docpool-transition-base);
}

.datatable .sortable-td:hover .sortable {
  color: var(--docpool-primary);
}

/* ============================================
   DROPDOWN MENUS
   ============================================ */

/* Base dropdown - harmonized between grid and docpool */
.dropdown,
.has-secondary-dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content,
.secondary-dropdown {
  display: none;
  position: absolute;
  left: 0;
  background-color: var(--dropdown-bg);
  box-shadow: var(--dropdown-shadow);
  z-index: var(--docpool-z-dropdown);
  min-width: var(--dropdown-min-width);
  border-radius: var(--docpool-radius-sm);
  overflow: hidden;
}

.dropdown:hover .dropdown-content,
.has-secondary-dropdown:hover .secondary-dropdown {
  display: block;
}

/* Ensure dropdown stays within viewport */
.dropdown:hover .dropdown-content {
  right: auto;
  transform: translateX(0);
}

/* Adjust if clipped on right */
.dropdown:hover .dropdown-content {
  left: auto;
  right: 0;
}

/* Dropdown buttons and items */
.dropdown-content button,
.dropdown-content #edit-button,
.secondary-dropdown button {
  font-weight: var(--docpool-font-weight-normal);
  background: none;
  border: none;
  padding: 10px;
  box-sizing: border-box;
  text-align: left;
  width: 100%;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--docpool-spacing-sm);
  transition: background-color var(--docpool-transition-base);
  font-family: var(--docpool-font-family);
  font-size: var(--docpool-font-size-base);
  color: var(--docpool-text-primary);
}

.dropdown-content button:hover,
.dropdown-content #edit-button:hover,
.secondary-dropdown button:hover {
  background-color: var(--dropdown-hover-bg);
}

.dropdown-content button svg,
.dropdown-content #edit-button svg,
.secondary-dropdown button svg {
  height: 17px;
  width: 17px;
  flex-shrink: 0;
}

/* Secondary dropdown positioning */
.has-secondary-dropdown {
  position: relative;
  display: flex;
  justify-content: space-between;
}

.has-secondary-dropdown span {
  display: flex;
  align-items: center;
}

.secondary-dropdown {
  display: none;
  position: absolute;
  left: -150px;
  top: 0;
  background-color: var(--dropdown-bg);
  box-shadow: var(--dropdown-shadow);
  z-index: calc(var(--docpool-z-dropdown) + 1);
  min-width: var(--dropdown-min-width);
}

.has-secondary-dropdown:hover .secondary-dropdown {
  display: block;
}

/* Dropdown arrow rotation */
#turn-arrow,
#turn-arrow2 {
  transition: transform var(--docpool-transition-base);
  flex-shrink: 0;
}

.dropdown:hover #turn-arrow,
.has-secondary-dropdown:hover #turn-arrow2 {
  transform: rotate(90deg);
}

/* ============================================
   PAGINATION
   ============================================ */

/* Footer box container */
tfoot tr td #footer-box,
.datatable tfoot #footer-box {
  display: flex;
  align-items: center;
  gap: var(--docpool-spacing-sm);
  justify-content: flex-end;
  flex-wrap: wrap;
}

/* Pagination buttons */
tfoot tr td #footer-box button,
.datatable tfoot #footer-box button {
  padding: 0;
  border: none;
  background: none;
  cursor: pointer;
  transition: all var(--docpool-transition-base);
  font-family: var(--docpool-font-family);
  font-size: var(--docpool-font-size-base);
}

tfoot tr td #footer-box button:not(:disabled),
.datatable tfoot #footer-box button:not(:disabled) {
  cursor: pointer;
}

tfoot tr td #footer-box button:disabled,
.datatable tfoot #footer-box button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

tfoot tr td #footer-box button.navbutton,
.datatable tfoot #footer-box button.navbutton {
  height: var(--pagination-button-size);
  width: var(--pagination-button-size);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--docpool-radius-sm);
  transition: background-color var(--docpool-transition-base);
}

tfoot tr td #footer-box button.navbutton:hover:not(:disabled),
.datatable tfoot #footer-box button.navbutton:hover:not(:disabled) {
  background-color: var(--docpool-bg-hover);
}

/* Navigation buttons container */
tfoot tr td #footer-box #navbuttons,
.datatable tfoot #footer-box #navbuttons {
  display: flex;
  align-items: center;
  gap: var(--pagination-gap);
}

/* Page status */
tfoot tr td #footer-box #page-status,
.datatable tfoot #footer-box #page-status {
  display: flex;
  align-items: center;
  font-size: var(--docpool-font-size-base);
  color: var(--docpool-text-primary);
}

/* Row count select */
tfoot tr td #footer-box select,
.datatable tfoot #footer-box select {
  padding: var(--docpool-spacing-xs) var(--docpool-spacing-sm);
  border: 1px solid var(--grid-border);
  border-radius: var(--input-border-radius);
  font-size: var(--docpool-font-size-base);
  font-family: var(--docpool-font-family);
  background-color: var(--grid-search-bg);
  cursor: pointer;
  transition: border-color var(--docpool-transition-base);
}

tfoot tr td #footer-box select:hover,
.datatable tfoot #footer-box select:hover {
  border-color: var(--grid-search-focus);
}

tfoot tr td #footer-box select:focus,
.datatable tfoot #footer-box select:focus {
  outline: 2px solid var(--grid-search-focus);
  outline-offset: -1px;
  border-color: var(--grid-search-focus);
}

/* ============================================
   ACTION BUTTONS
   ============================================ */

/* Harmonized button styles for both components */
button[type='button'],
button[type='submit'],
input[type='submit'] {
  font-family: var(--docpool-font-family);
  font-size: var(--docpool-font-size-base);
  transition: all var(--docpool-transition-base);
  cursor: pointer;
  border-radius: var(--docpool-radius-sm);
}

/* Success button (green) */
button.btn-success,
button[style*='#28a745'],
button[style*='background-color: #28a745'] {
  background-color: var(--docpool-success) !important;
  color: white !important;
  border: none;
  padding: var(--docpool-spacing-xs) var(--docpool-spacing-sm);
  font-weight: var(--docpool-font-weight-bold);
}

button.btn-success:hover,
button[style*='#28a745']:hover {
  background-color: var(--docpool-success-hover) !important;
  transform: scale(1.05);
}

/* Danger button (red) */
button.btn-danger,
button[style*='#dc3545'],
button[style*='background-color: #dc3545'] {
  background-color: var(--docpool-danger) !important;
  color: white !important;
  border: none;
  padding: var(--docpool-spacing-xs) var(--docpool-spacing-sm);
  font-weight: var(--docpool-font-weight-bold);
}

button.btn-danger:hover,
button[style*='#dc3545']:hover {
  background-color: var(--docpool-danger-hover) !important;
  transform: scale(1.05);
}

/* Primary button */
button.btn-primary,
button[style*='background-color'][style*='var(--docpool-primary)'] {
  background-color: var(--docpool-primary) !important;
  color: var(--docpool-primary-text) !important;
  border: 1px solid var(--docpool-primary) !important;
  padding: var(--docpool-spacing-xs) var(--docpool-spacing-sm);
  font-weight: var(--docpool-font-weight-bold);
}

button.btn-primary:hover {
  opacity: 0.9;
  transform: scale(1.05);
}

/* ============================================
   HIGHLIGHTING (Search results)
   ============================================ */

.datatable tbody td span[style*='background-color:#FF0'],
.datatable tbody td span[style*='background-color: #FF0'] {
  background-color: var(--grid-highlight-bg) !important;
  color: var(--grid-highlight-text);
  padding: 1px 2px;
  border-radius: 2px;
}

/* ============================================
   COLUMN SETUP & FILTER SETUP
   ============================================ */

/* Column edit buttons */
.move-buttons {
  margin: 0;
  padding: 0;
  border: none;
  background-color: transparent;
  height: 15px;
  cursor: pointer;
  transition: opacity var(--docpool-transition-base);
}

.move-buttons:hover {
  opacity: 0.7;
}

.move-buttons svg {
  width: 20px;
  height: 15px;
}

/* Filter wrapper */
#filter-wrapper {
  display: flex;
  width: 100%;
  gap: 2em;
  flex-wrap: wrap;
}

#filter-wrapper > div {
  flex: 1;
  min-width: 200px;
}

#filter-wrapper label {
  display: flex;
  align-items: center;
  gap: var(--docpool-spacing-sm);
  cursor: pointer;
  padding: var(--docpool-spacing-xs) 0;
  font-size: var(--docpool-font-size-base);
}

#filter-wrapper input[type='checkbox'] {
  cursor: pointer;
  width: auto;
  margin: 0;
}

/* ============================================
   SCROLLBARS
   ============================================ */

/* Custom scrollbar for datatable wrapper */
.datatable-wrapper::-webkit-scrollbar,
#fileListContainer::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.datatable-wrapper::-webkit-scrollbar-track,
#fileListContainer::-webkit-scrollbar-track {
  background: var(--docpool-bg-secondary);
}

.datatable-wrapper::-webkit-scrollbar-thumb,
#fileListContainer::-webkit-scrollbar-thumb {
  background: var(--docpool-border);
  border-radius: var(--docpool-radius-sm);
}

.datatable-wrapper::-webkit-scrollbar-thumb:hover,
#fileListContainer::-webkit-scrollbar-thumb:hover {
  background: var(--docpool-border-hover);
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Text alignment */
.text-left {
  text-align: left;
}

.text-center {
  text-align: center;
}

.text-right {
  text-align: right;
}

/* Spacing utilities */
.mt-sm { margin-top: var(--docpool-spacing-sm); }
.mt-md { margin-top: var(--docpool-spacing-md); }
.mt-lg { margin-top: var(--docpool-spacing-lg); }

.mb-sm { margin-bottom: var(--docpool-spacing-sm); }
.mb-md { margin-bottom: var(--docpool-spacing-md); }
.mb-lg { margin-bottom: var(--docpool-spacing-lg); }

.p-sm { padding: var(--docpool-spacing-sm); }
.p-md { padding: var(--docpool-spacing-md); }
.p-lg { padding: var(--docpool-spacing-lg); }

/* Display utilities */
.flex { display: flex; }
.flex-column { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.gap-sm { gap: var(--docpool-spacing-sm); }
.gap-md { gap: var(--docpool-spacing-md); }

/* ============================================
   RESPONSIVE DESIGN
   ============================================ */

@media (max-width: 768px) {
  .datatable-wrapper {
    overflow-x: auto;
  }
  
  .datatable {
    min-width: 600px;
  }
  
  .dropdown-content {
    min-width: 120px;
  }
  
  tfoot tr td #footer-box {
    flex-direction: column;
    align-items: stretch;
  }
  
  tfoot tr td #footer-box #navbuttons {
    justify-content: center;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  .datatable-wrapper {
    overflow: visible;
  }
  
  .datatable thead,
  .datatable tfoot {
    position: static;
  }
  
  .dropdown,
  .dropdown-content,
  button[type='button'] {
    display: none !important;
  }
  
  .datatable tbody tr.filler-row {
    display: none;
  }
}

